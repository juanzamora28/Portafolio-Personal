import{Da as D,Gb as M,Jb as A,Qa as a,Ra as o,Sa as h,X as k,Y as E,db as d,fb as O,ka as C,ua as F,ya as S}from"./chunk-WW7CRUNY.js";import{a as y,b as x,g as f}from"./chunk-NKRFROHD.js";var P=class v{constructor(i){this.platformId=i}regainedCount=0;nextWeekProjection=[];opportunities=[{id:1,history:["creada","perdida","ganada"]},{id:2,history:["creada","perdida"]},{id:3,history:["creada","negociaci\xF3n","ganada"]},{id:4,history:["creada","perdida","negociaci\xF3n","ganada"]}];historicalOrders=[{date:"2025-05-01",count:34},{date:"2025-05-02",count:29}];ApexCharts;ngOnInit(){this.computeRegained()}ngAfterViewInit(){return f(this,null,function*(){if(A(this.platformId)){let i=yield import("./chunk-LGABDJFD.js");this.ApexCharts=i.default,this.renderDonutChart(),this.renderFunnelBarChart(),this.renderTimelineChart(),this.renderHeatmapChart(),yield this.renderWordCloudChart(),this.computeNextWeekProjection(),this.renderProjectionChart();let{createSwapy:t}=yield import("./chunk-3MKEMYDO.js"),e=document.getElementById("swap-container");e&&t(e,{swapMode:"drop"}).onSwap(l=>console.log(""))}})}getMode(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}commonPadding(){return{padding:{left:20,right:20,top:10,bottom:10}}}renderDonutChart(){let i=this.ApexCharts,t=this.getMode(),e=t==="dark"?"#F3F4F6":"#1F2937",s={"Oportunidad creada":"\u{1F195}","Cotizaci\xF3n enviada":"\u{1F4E7}","Oportunidad ganada":"\u{1F389}","Oportunidad perdida":"\u274C",Negociaci\u00F3n:"\u{1F91D}","Solicitud de repuestos":"\u{1F4E6}","En taller":"\u{1F527}","En espera de retiro":"\u23F3","Entrega conforme":"\u{1F4CB}",Finalizada:"\u2705"},l=Object.keys(s),r=x(y({chart:{type:"donut",width:"100%",height:"100%",background:"transparent",foreColor:e},theme:{mode:t},colors:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#6366F1","#0EA5E9","#F43F5E","#E11D48","#4ADE80"],series:[15,12,8,5,4,7,6,3,2,18],labels:l},this.commonPadding()),{dataLabels:{enabled:!0,formatter:(c,p)=>{let g=typeof c=="number"?c:Number(c),u=p.w.globals.labels[p.seriesIndex];return`${s[u]} ${g.toFixed(0)}%`}},legend:{show:!1}});new i(document.querySelector("#donut-chart"),r).render()}renderFunnelBarChart(){let i=this.ApexCharts,t=this.getMode(),e=t==="dark"?"#F3F4F6":"#1F2937",s=["Oportunidad creada","Cotizaci\xF3n enviada","Oportunidad ganada","Oportunidad perdida","Negociaci\xF3n","Solicitud de repuestos","En taller","En espera de retiro","Entrega conforme","Finalizada"],l=[100,85,60,25,30,40,35,20,15,90],n={"Oportunidad creada":"\u{1F195}","Cotizaci\xF3n enviada":"\u{1F4E7}","Oportunidad ganada":"\u{1F389}","Oportunidad perdida":"\u274C",Negociaci\u00F3n:"\u{1F91D}","Solicitud de repuestos":"\u{1F4E6}","En taller":"\u{1F527}","En espera de retiro":"\u23F3","Entrega conforme":"\u{1F4CB}",Finalizada:"\u2705"},r=x(y({chart:{type:"bar",width:"100%",height:"100%",background:"transparent",foreColor:e},theme:{mode:t},colors:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#6366F1","#0EA5E9","#F43F5E","#E11D48","#4ADE80"],series:[{name:"\xD3rdenes",data:l}],plotOptions:{bar:{horizontal:!0,barHeight:"45%",distributed:!0}}},this.commonPadding()),{dataLabels:{enabled:!0,formatter:(c,p)=>{let g=typeof c=="number"?c:Number(c);return`${n[s[p.dataPointIndex]]} ${g}`},style:{fontSize:"12px"}},xaxis:{categories:s,labels:{show:!1}},yaxis:{labels:{style:{colors:Array(s.length).fill(e)}}},grid:{show:!1},legend:{show:!1}});new i(document.querySelector("#funnel-chart"),r).render()}renderTimelineChart(){let i=this.ApexCharts,t=this.getMode(),e=t==="dark"?"#F3F4F6":"#1F2937",s=["Oportunidad creada","Cotizaci\xF3n enviada","Oportunidad ganada","Oportunidad perdida","Negociaci\xF3n","Solicitud de repuestos","En taller","En espera de retiro","Entrega conforme","Finalizada"],l=[.5,1.2,2,.8,1.5,3,2.5,1,.7,.4],n={"Oportunidad creada":"\u{1F195}","Cotizaci\xF3n enviada":"\u{1F4E7}","Oportunidad ganada":"\u{1F389}","Oportunidad perdida":"\u274C",Negociaci\u00F3n:"\u{1F91D}","Solicitud de repuestos":"\u{1F4E6}","En taller":"\u{1F527}","En espera de retiro":"\u23F3","Entrega conforme":"\u{1F4CB}",Finalizada:"\u2705"},r=s.map(p=>`${n[p]} ${p}`),c=x(y({chart:{type:"line",width:"100%",height:"100%",background:"transparent",foreColor:e},theme:{mode:t},colors:["#3B82F6"],series:[{name:"D\xEDas",data:l}],stroke:{curve:"smooth",width:2},markers:{size:5}},this.commonPadding()),{xaxis:{categories:r,labels:{rotate:-30,hideOverlappingLabels:!0,style:{colors:r.map(()=>e)}}},yaxis:{labels:{style:{colors:[e]}}},grid:{show:!1}});new i(document.querySelector("#timeline-chart"),c).render()}renderHeatmapChart(){let i=this.ApexCharts,t=this.getMode(),e=t==="dark"?"#F3F4F6":"#1F2937",s=["Lun","Mar","Mi\xE9","Jue","Vie","S\xE1b","Dom"],l=[{name:"\xD3rdenes/d\xEDa",data:s.map(r=>({x:r,y:Math.floor(Math.random()*20)+5}))}],n=x(y({chart:{type:"heatmap",width:"100%",height:"100%",background:"transparent",foreColor:e},theme:{mode:t},series:l,plotOptions:{heatmap:{shadeIntensity:.6,radius:3,colorScale:{ranges:[{from:0,to:10,color:"#D1FAE5"},{from:11,to:20,color:"#6EE7B7"},{from:21,to:30,color:"#10B981"}]}}}},this.commonPadding()),{dataLabels:{enabled:!0,formatter:r=>`\u2753 ${r}`},tooltip:{y:{formatter:r=>`\u2753 ${r}`}},xaxis:{labels:{style:{colors:s.map(()=>e)}}},yaxis:{show:!1},legend:{show:!1}});new i(document.querySelector("#heatmap-chart"),n).render()}renderWordCloudChart(){return f(this,null,function*(){let i=(yield import("./chunk-2EVMI73L.js")).default,t=yield import("./chunk-GMIPDLH6.js"),e={"Precio alto":12,Tiempos:8,"Disponibilidad repuestos":5,Competencia:6,"Alcance trabajo":4,Otros:3},s=Object.entries(e).map(([g,u])=>({text:g,size:Math.max(14,12+u*2)})),l=600,n=200,r=this.getMode()==="dark",c=r?"#fff":"rgba(0,0,0,0.7)",p=r?"#000":"#fff";i().size([l,n]).words(s).padding(5).rotate(()=>Math.random()<.5?0:90).font("sans-serif").fontWeight("bold").fontSize(g=>g.size).on("end",g=>{let u=t.select("#wordcloud-chart").html("").style("position","relative"),b=u.append("div").style("position","absolute").style("background",c).style("color",p).style("padding","4px 8px").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("visibility","hidden");u.append("svg").attr("width",l).attr("height",n).append("g").attr("transform",`translate(${l/2},${n/2})`).selectAll("text").data(g).enter().append("text").style("font-family","sans-serif").style("font-weight","bold").style("font-size",m=>`${m.size}px`).attr("fill","currentColor").attr("text-anchor","middle").attr("transform",m=>`translate(${m.x},${m.y})rotate(${m.rotate})`).text(m=>m.text).on("mouseover",(m,w)=>{b.text(`${w.text}: ${e[w.text]} veces`).style("visibility","visible")}).on("mousemove",m=>{let[w,z]=t.pointer(m,u.node());b.style("left",`${w+10}px`).style("top",`${z+10}px`)}).on("mouseout",()=>{b.style("visibility","hidden")})}).start()})}computeRegained(){this.regainedCount=this.opportunities.filter(i=>{let t=i.history.indexOf("perdida"),e=i.history.indexOf("ganada");return t!==-1&&e!==-1&&e>t}).length}computeNextWeekProjection(){let i={};for(let{date:n,count:r}of this.historicalOrders){let c=new Date(n).getDay();(i[c]||=[]).push(r)}let t={};for(let n=0;n<7;n++){let r=i[n]||[0];t[n]=r.reduce((c,p)=>c+p,0)/r.length}let e=new Date,s=(1-e.getDay()+7)%7,l=new Date(e.getFullYear(),e.getMonth(),e.getDate()+s);this.nextWeekProjection=[];for(let n=0;n<7;n++){let r=new Date(l);r.setDate(l.getDate()+n);let c=r.getDay();this.nextWeekProjection.push({date:r.toISOString().slice(0,10),count:parseFloat(t[c].toFixed(1))})}}renderProjectionChart(){let i=this.ApexCharts,t=this.getMode(),e=t==="dark"?"#F3F4F6":"#1F2937",s=this.nextWeekProjection.map(r=>r.date),l=this.nextWeekProjection.map(r=>r.count),n={chart:{type:"line",height:"100%",background:"transparent",foreColor:e},theme:{mode:t},series:[{name:"Proyecci\xF3n pr\xF3xima semana",data:l}],xaxis:{categories:s,title:{text:"Fecha"},labels:{rotate:-45,style:{colors:s.map(()=>e)}}},yaxis:{title:{text:"\xD3rdenes proyectadas"},labels:{style:{colors:[e]}}},stroke:{curve:"smooth",width:2},markers:{size:4},dataLabels:{enabled:!1},tooltip:{y:{formatter:r=>`${r.toFixed(1)} \xF3rdenes`}},grid:{padding:{left:10,right:10}}};new i(document.querySelector("#projection-chart"),n).render()}static \u0275fac=function(t){return new(t||v)(S(C))};static \u0275cmp=D({type:v,selectors:[["app-dashboard-1"]],decls:77,vars:1,consts:[[1,"max-w-6xl","mx-auto","px-6","mb-6"],[1,"flex","items-center","justify-center","space-x-2","p-4","bg-gradient-to-r","from-blue-100","to-green-100","dark:from-gray-800","dark:to-gray-700","rounded-2xl","shadow-md"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-500","dark:text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 10h16M4 14h16M10 6l6 6-6 6"],[1,"text-center","text-gray-700","dark:text-gray-300"],[1,"font-semibold"],["id","swap-container",1,"p-6","rounded-2xl","shadow-lg","space-y-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-5","gap-6"],["data-swapy-slot","slot-total-ordenes"],["data-swapy-item","metric-total-ordenes",1,"flex","flex-col","p-5","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-xl","shadow-sm","hover:shadow-lg","transition-shadow","duration-300","border-l-4","border-blue-500","dark:border-blue-400"],[1,"text-sm","text-gray-500","dark:text-gray-400","uppercase"],[1,"mt-2","text-3xl","font-extrabold","text-gray-900","dark:text-white"],["data-swapy-slot","slot-promedio-dias"],["data-swapy-item","metric-promedio-dias",1,"flex","flex-col","p-5","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-xl","shadow-sm","hover:shadow-lg","transition-shadow","duration-300","border-l-4","border-green-500","dark:border-green-400"],["data-swapy-slot","slot-ordenes-hoy"],["data-swapy-item","metric-ordenes-hoy",1,"flex","flex-col","p-5","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-xl","shadow-sm","hover:shadow-lg","transition-shadow","duration-300","border-l-4","border-yellow-500","dark:border-yellow-400"],["data-swapy-slot","slot-tasa-exito"],["data-swapy-item","metric-tasa-exito",1,"flex","flex-col","p-5","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-xl","shadow-sm","hover:shadow-lg","transition-shadow","duration-300","border-l-4","border-indigo-500","dark:border-indigo-400"],["data-swapy-slot","slot-oportunidades-reganadas"],["data-swapy-item","metric-oportunidades-reganadas",1,"flex","flex-col","p-5","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-xl","shadow-sm","hover:shadow-lg","transition-shadow","duration-300","border-l-4","border-pink-500","dark:border-pink-400"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["data-swapy-slot","slot-donut"],["data-swapy-item","card-donut",1,"flex","flex-col","p-4","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow","duration-200","border-t-4","border-blue-500","dark:border-blue-400"],[1,"text-xl","font-bold","mb-2","text-gray-900","dark:text-gray-100"],[1,"w-full","h-80","flex","items-center","justify-center"],["id","donut-chart",1,"w-full","h-full"],["data-swapy-slot","slot-funnel"],["data-swapy-item","card-funnel",1,"flex","flex-col","p-4","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow","duration-200","border-t-4","border-green-500","dark:border-green-400"],["id","funnel-chart",1,"w-full","h-full"],["data-swapy-slot","slot-timeline"],["data-swapy-item","card-timeline",1,"flex","flex-col","p-4","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow","duration-200","border-t-4","border-yellow-500","dark:border-yellow-400"],["id","timeline-chart",1,"w-full","h-full"],["data-swapy-slot","slot-heatmap"],["data-swapy-item","card-heatmap",1,"flex","flex-col","p-4","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow","duration-200","border-t-4","border-indigo-500","dark:border-indigo-400"],["id","heatmap-chart",1,"w-full","h-full"],["data-swapy-slot","slot-wordcloud",1,"md:col-span-2"],["data-swapy-item","card-wordcloud",1,"flex","flex-col","p-4","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow","duration-200","border-t-4","border-pink-500","dark:border-pink-400"],["id","wordcloud-chart",1,"w-full","h-64","flex","items-center","justify-center","overflow-hidden","text-gray-900","dark:text-gray-100"],["data-swapy-slot","slot-proyeccion",1,"md:col-span-2"],["data-swapy-item","card-proyeccion",1,"flex","flex-col","p-4","bg-white","dark:bg-gray-800","ring-1","ring-gray-200","dark:ring-gray-700","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow","duration-200","border-t-4","border-teal-500","dark:border-teal-400"],[1,"w-full","h-80"],["id","projection-chart",1,"w-full","h-full"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"div",1),k(),a(2,"svg",2),h(3,"path",3),o(),E(),a(4,"p",4),d(5," \xA1Organiza las m\xE9tricas y gr\xE1ficos a tu gusto! "),a(6,"span",5),d(7,"Arrastra y suelta"),o(),d(8," cada tarjeta para intercambiarlas. "),o()()(),a(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"span",10),d(14," Total \xD3rdenes "),o(),a(15,"span",11),d(16," 1 500 "),o()()(),a(17,"div",12)(18,"div",13)(19,"span",10),d(20," Promedio d\xEDas "),o(),a(21,"span",11),d(22," 4.2 "),o()()(),a(23,"div",14)(24,"div",15)(25,"span",10),d(26," \xD3rdenes hoy "),o(),a(27,"span",11),d(28," 34 "),o()()(),a(29,"div",16)(30,"div",17)(31,"span",10),d(32," Tasa \xE9xito "),o(),a(33,"span",11),d(34," 97 % "),o()()(),a(35,"div",18)(36,"div",19)(37,"span",10),d(38," Oportunidades re-ganadas "),o(),a(39,"span",11),d(40),o()()()(),a(41,"div",20)(42,"div",21)(43,"div",22)(44,"h3",23),d(45," \xD3rdenes por estado "),o(),a(46,"div",24),h(47,"div",25),o()()(),a(48,"div",26)(49,"div",27)(50,"h3",23),d(51," Embudo de procesos "),o(),a(52,"div",24),h(53,"div",28),o()()(),a(54,"div",29)(55,"div",30)(56,"h3",23),d(57," Duraci\xF3n promedio por etapa "),o(),a(58,"div",24),h(59,"div",31),o()()(),a(60,"div",32)(61,"div",33)(62,"h3",23),d(63," \xD3rdenes diarias (\xFAltima semana) "),o(),a(64,"div",24),h(65,"div",34),o()()(),a(66,"div",35)(67,"div",36)(68,"h3",23),d(69," Motivos de oportunidad perdida "),o(),h(70,"div",37),o()(),a(71,"div",38)(72,"div",39)(73,"h3",23),d(74," Proyecci\xF3n de \xF3rdenes pr\xF3xima semana "),o(),a(75,"div",40),h(76,"div",41),o()()()()()),t&2&&(F(40),O(" ",e.regainedCount," "))},dependencies:[M],encapsulation:2})};export{P as Dashboard1Component};
