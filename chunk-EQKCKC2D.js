import{b as ee,c as te,d as re,e as ae,f as ie}from"./chunk-BCEJU3MW.js";import{b as Q,c as Z}from"./chunk-NSD7ZKFA.js";import{Bb as J,Cb as U,Da as N,Db as X,Fb as Y,Ga as z,Gb as K,Jb as _,Na as k,Pa as R,Qa as a,Ra as i,Sa as b,Ta as O,Ua as T,X as S,Xa as B,Y as M,db as n,eb as V,fb as y,gb as q,ib as I,jb as E,ka as W,kb as P,t as G,ua as c,ya as A}from"./chunk-WW7CRUNY.js";import{a as H,b as j,g as C}from"./chunk-NKRFROHD.js";var $=(f,r)=>({"text-red-500":f,"text-green-500":r}),le=(f,r)=>({"text-yellow-400 animate-pulse":f,"text-gray-300 dark:text-gray-600":r});function de(f,r){f&1&&(O(0),a(1,"div",1)(2,"div",2)(3,"div",3),S(),a(4,"svg",4),b(5,"circle",5)(6,"path",6),i()(),M(),a(7,"h3",7),n(8," Cargando Dashboard\u2026 "),i(),a(9,"p",8),n(10," Por favor, espera un momento mientras cargamos los datos. "),i()()(),T())}function ce(f,r){if(f&1&&(O(0),S(),a(1,"svg",67),b(2,"path",68),i(),T()),f&2){let e=r.index,t=B(2);c(),k("ngClass",I(1,le,e<t.roundedAvg,e>=t.roundedAvg))}}function pe(f,r){if(f&1&&(a(0,"tr")(1,"td",69),n(2),i(),a(3,"td",70),n(4),i(),a(5,"td",71),n(6),i(),a(7,"td",72),n(8),i(),a(9,"td",71),n(10),E(11,"number"),i(),a(12,"td",71),n(13),E(14,"number"),i(),a(15,"td",71),n(16),i(),a(17,"td",73),n(18),E(19,"number"),i()()),f&2){let e=r.$implicit,t=r.index;R(`
          transition-colors duration-200
          hover:bg-indigo-50 dark:hover:bg-indigo-900/50
          `,t%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900/70",`
        `),c(2),y(" ",e.rut_cotizador," "),c(2),y(" ",e.nombre_cotizador," "),c(2),y(" ",e.total_asignadas," "),c(2),y(" ",e.total_ganadas," "),c(2),y(" $",P(11,11,e.monto_asignadas,"1.0-0")," "),c(3),y(" $",P(14,14,e.monto_ganadas,"1.0-0")," "),c(3),y(" ",e.total_negociaciones," "),c(2),y(" ",P(19,17,e.porcentaje_concrecion,"1.0-0"),"% ")}}function me(f,r){if(f&1&&(O(0),a(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"a",13)(6,"span",14),n(7," Ver Clientes "),i(),a(8,"div",15),S(),a(9,"svg",16),b(10,"path",17),i()(),M(),b(11,"div",18),a(12,"div",19)(13,"p",20),n(14," Total de Clientes "),i(),a(15,"h3",21),n(16),i()(),a(17,"div",22),z(18,ce,3,4,"ng-container",23),a(19,"span",24),n(20),E(21,"number"),i()()(),a(22,"div",25)(23,"div",26),S(),a(24,"svg",16),b(25,"path",27),i()(),M(),b(26,"div",18),a(27,"div",28)(28,"p",20),n(29," Solicitudes Semanales "),i(),a(30,"h3",21),n(31),i()(),a(32,"div",29)(33,"span",30),n(34),i(),a(35,"span",31),n(36," respecto a la semana pasada "),i()()(),a(37,"div",32)(38,"div",33),S(),a(39,"svg",16),b(40,"path",34),i()(),M(),b(41,"div",18),a(42,"div",28)(43,"p",20),n(44," Oportunidades Ganadas Sem Actual "),i(),a(45,"h3",21),n(46),i()(),a(47,"div",29)(48,"span",30),n(49),i(),a(50,"span",31),n(51," respecto a la semana pasada "),i()()(),a(52,"div",35)(53,"div",36),S(),a(54,"svg",16),b(55,"path",37),i()(),M(),b(56,"div",18),a(57,"div",28)(58,"p",20),n(59," Total Valoraci\xF3n Generada "),i(),a(60,"h3",21),n(61),i()(),a(62,"div",38)(63,"p",39),n(64," Mes anterior: "),a(65,"strong"),n(66),E(67,"number"),i()(),a(68,"p",39),n(69," Cambio: "),a(70,"strong",40),n(71),E(72,"number"),i()()()()(),a(73,"div",41)(74,"div",42)(75,"div",43)(76,"div",44),b(77,"div",45),i()(),a(78,"div",46)(79,"div",44),b(80,"div",47),i()()(),a(81,"div",48)(82,"div",49),b(83,"div",50),i()(),a(84,"div",51)(85,"div",49),b(86,"div",52),i(),a(87,"div",53),n(88," Haz clic en un sector del gr\xE1fico para ver el detalle de ese proceso o para volver al gr\xE1fico de pie "),i()(),a(89,"div",54)(90,"div",49),b(91,"div",55),i()(),a(92,"div",56)(93,"div",44),b(94,"div",57),i()(),a(95,"div",58)(96,"table",59)(97,"thead",60)(98,"tr")(99,"th",61),n(100," RUT "),i(),a(101,"th",61),n(102," Cotizador "),i(),a(103,"th",62),n(104," Asignadas "),i(),a(105,"th",63),n(106," Ganadas "),i(),a(107,"th",62),n(108," Monto Propuesto "),i(),a(109,"th",62),n(110," Monto Ganado "),i(),a(111,"th",62),n(112," Negociaciones "),i(),a(113,"th",64),n(114," % Concreci\xF3n "),i()()(),a(115,"tbody",65),z(116,pe,20,20,"tr",66),i()()()()()()(),T()),f&2){let e=B();c(5),k("routerLink","/dashboard3/general-cliente"),c(11),y(" ",e.clientesTotal," "),c(2),k("ngForOf",e.stars),c(2),y(" ",P(21,16,e.clientesAvgScore,"1.1-1")," / 5 "),c(11),y(" ",e.lastWeek||0," "),c(2),k("ngClass",I(25,$,e.difference<0,e.difference>=0)),c(),y(" ",e.difference>0?"+"+e.difference:e.difference," "),c(12),y(" ",e.proposalsLastWeek," "),c(2),k("ngClass",I(28,$,e.proposalsDifference<0,e.proposalsDifference>=0)),c(),y(" ",e.proposalsDifference>0?"+"+e.proposalsDifference:e.proposalsDifference," "),c(12),y(" ",e.monthlyTotal," "),c(5),V(P(67,19,e.previousMonthlyTotal,"1.0-0")),c(4),k("ngClass",I(31,$,e.monthlyDifference<0,e.monthlyDifference>=0)),c(),q(" ",e.monthlyDifference>=0?"+":"","",P(72,22,e.monthlyDifference,"1.0-2"),"% "),c(45),k("ngForOf",e.cotizadores)}}var oe=class f{constructor(r,e,t,s){this.platformId=r;this.http=e;this.route=t;this.router=s}isBar=!1;ApexCharts;lastWeek=0;prevWeek=0;difference=0;estadoLabels=[];estadoSeries=[];proposalsLastWeek=0;proposalsDifference=0;clientesTotal=0;clientesAvgScore=0;stars=Array(5).fill(0);currentMonthLabel="";monthlyTotal=0;previousMonthlyTotal=0;monthlyDifference=0;serviceChartCategories=[];serviceSeries=[];fabricationSeries=[];fabricationLabels=[];fabricationPercentages=[];fabricationStatusByProcess=new Map;fabricationChart;fabricationCounts=[];heatmapData=[];cecoLabels=[];cecoSeries=[];solicitudesMontoPorEstado=null;cotizadores=[];isLoading=!1;ngOnInit(){this.router.events.pipe(G(r=>r instanceof ee)).subscribe(()=>{!this.route.firstChild&&_(this.platformId)&&this.initializeCharts()}),this.fetchCotizadoresGeneral()}ngAfterViewInit(){return C(this,null,function*(){if(!_(this.platformId)||this.route.firstChild)return;let{default:r}=yield import("./chunk-LGABDJFD.js");this.ApexCharts=r,yield this.initializeCharts()})}sleep(r){return new Promise(e=>setTimeout(e,r))}initializeCharts(){return C(this,null,function*(){this.isLoading=!0,yield this.fetchWeeklySummary(),yield this.fetchEstadoSummary(),yield this.fetchPropuestasSummary(),yield this.fetchClientesSummary(),yield this.fetchMonthlySummary(),yield this.fetchOpportunitiesSummary(),yield this.fetchFabricationData(),yield this.fetchAllProcessStatusByCeco(),yield this.fetchHeatmapData(),yield this.fetchMontoPorCeco(),yield this.fetchSolicitudesMontoPorEstado(),this.renderOpportunitiesChart(),this.renderEstadoChart(),this.renderHeatmapChart(),this.renderFabricationChart(),this.renderMontoFunnelChart(),this.isLoading=!1})}getApexThemeMode(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}fetchFabricationData(){return this.http.get("https://dashboard3-api-production.up.railway.app/api/dashboard/fabrication-process-percentages").toPromise().then((r=[])=>{this.fabricationLabels=r.map(e=>e.proceso),this.fabricationPercentages=r.map(e=>parseFloat(e.porcentaje)),this.fabricationCounts=r.map(e=>e.cantidad_ot)}).catch(r=>{console.error("fetchFabricationData error",r),this.fabricationLabels=[],this.fabricationPercentages=[],this.fabricationCounts=[]})}fetchAllProcessStatusByCeco(){return this.http.get("https://dashboard3-api-production.up.railway.app/api/dashboard/fabrication-process-status-by-ceco").toPromise().then((r=[])=>{this.fabricationStatusByProcess.clear(),r.forEach(e=>{let t=this.fabricationStatusByProcess.get(e.proceso)||[];t.push({ceco:e.ceco,count_finalizado:Number(e.count_finalizado),count_pendiente:Number(e.count_pendiente),pct_finalizado:parseFloat(e.pct_finalizado),pct_pendiente:parseFloat(e.pct_pendiente)}),this.fabricationStatusByProcess.set(e.proceso,t)})}).catch(r=>{console.error("fetchAllProcessStatusByCeco error",r),this.fabricationStatusByProcess.clear()})}onFabricationDataPointSelection=(r,e,t)=>{let s=t.dataPointIndex,o=this.fabricationLabels[s],p=this.fabricationStatusByProcess.get(o)||[];if(this.isBar){let d=this.fabricationLabels,x=this.fabricationPercentages,g=this.fabricationCounts,u=Math.min(d.length,6),l=d.map((m,h)=>`hsl(${Math.round(360*(h%u)/u)},70%,50%)`);this.fabricationChart.updateOptions({chart:{type:"pie",events:{dataPointSelection:this.onFabricationDataPointSelection}},title:{text:`PROCESO DE FABRICACION ${this.currentMonthLabel}`,align:"center"},series:x,labels:d,colors:l,dataLabels:{enabled:!0,formatter:m=>`${m.toFixed(2)}%`},tooltip:{y:{formatter:(m,h)=>`${g[h.dataPointIndex]} OTs`}}}),this.isBar=!1}else{let d=p.map(l=>l.pct_finalizado),x=p.map(l=>l.count_finalizado),g=p.map(l=>l.pct_pendiente),u=p.map(l=>l.count_pendiente);this.fabricationChart.updateOptions({chart:{type:"bar",events:{dataPointSelection:this.onFabricationDataPointSelection}},title:{text:`Proceso: ${o}`,align:"center"},series:[{name:"Finalizado (%)",data:d},{name:"Pendiente (%)",data:g}],colors:["#28a745","#ffc107"],xaxis:{categories:p.map(l=>l.ceco)},dataLabels:{enabled:!0,formatter:l=>`${l.toFixed(2)}%`},yaxis:{labels:{formatter:l=>`${l.toFixed(2)}%`}},tooltip:{shared:!0,intersect:!1,y:{formatter:(l,m)=>{let h=m.seriesIndex===0?x[m.dataPointIndex]:u[m.dataPointIndex],w=m.seriesIndex===0?"finalizados":"pendientes";return`${h} ${w}`}}}}),this.isBar=!0}};renderFabricationChart(){let r=document.querySelector("#pie_chart_2");if(!r)return;let e=this.fabricationLabels,t=this.fabricationPercentages,s=this.fabricationCounts;if(!e.length||!t.length||!s.length){console.warn("No hay datos para el pie chart de fabricaci\xF3n");return}let o=window.matchMedia("(prefers-color-scheme: dark)").matches;this.fabricationChart?.destroy(),this.isBar=!1;let p=400,d=Math.min(e.length,6),x=l=>e.map((m,h)=>`hsl(${Math.round(360*(h%d)/d)},70%,${l}%)`),g=()=>{let l=x(o?60:50);this.fabricationChart?.destroy(),this.fabricationChart=new this.ApexCharts(r,{chart:{type:"pie",height:p,animations:{enabled:!1},events:{dataPointSelection:(m,h,w)=>{setTimeout(()=>{u(e[w.dataPointIndex])},0)}}},title:{text:`PROCESO DE FABRICACION ${this.currentMonthLabel}`,align:"center",style:{color:o?"#fff":"#333"}},legend:{position:"bottom",labels:{colors:o?"#fff":"#333"}},series:t,labels:e,colors:l,dataLabels:{enabled:!0,formatter:m=>`${m.toFixed(2)}%`},tooltip:{theme:o?"dark":"light",y:{formatter:(m,h)=>`${s[h.dataPointIndex]} OTs`}},fill:{type:"solid",opacity:1},stroke:{show:!0,width:1,colors:["#fff"]}}),this.fabricationChart.render(),this.isBar=!1},u=l=>{let m=this.fabricationStatusByProcess.get(l)||[],h=m.map(v=>v.pct_finalizado),w=m.map(v=>v.pct_pendiente),D=m.map(v=>v.count_finalizado),F=m.map(v=>v.count_pendiente);this.fabricationChart?.destroy(),this.fabricationChart=new this.ApexCharts(r,{chart:{type:"bar",height:p,animations:{enabled:!1},events:{dataPointSelection:()=>{setTimeout(g,0)}}},title:{text:`Proceso: ${l}`,align:"center",style:{color:o?"#fff":"#333"}},colors:o?["#66bb6a","#ffca28"]:["#28a745","#ffc107"],series:[{name:"Finalizado (%)",data:h},{name:"Pendiente (%)",data:w}],xaxis:{categories:m.map(v=>v.ceco),labels:{style:{colors:o?"#fff":"#333"}}},yaxis:{labels:{formatter:v=>`${v.toFixed(2)}%`,style:{colors:o?"#fff":"#333"}}},dataLabels:{enabled:!0,formatter:v=>`${v.toFixed(2)}%`,style:{colors:[o?"#fff":"#000"]}},tooltip:{theme:o?"dark":"light",shared:!0,intersect:!1,y:{formatter:(v,L)=>{let ne=L.seriesIndex===0?D[L.dataPointIndex]:F[L.dataPointIndex],se=L.seriesIndex===0?"finalizados":"pendientes";return`${ne} ${se}`}}},fill:{type:"solid",opacity:1},stroke:{show:!0,width:1,colors:["#fff"]}}),this.fabricationChart.render(),this.isBar=!0};g()}renderEstadoChart(){return C(this,null,function*(){if(!_(this.platformId))return;let r=(yield import("./chunk-LGABDJFD.js")).default,e=document.querySelector("#pie_chart");if(!e)return;let t=window.matchMedia("(prefers-color-scheme: dark)").matches,s=this.estadoLabels.map((d,x)=>`hsl(${Math.round(360*x/this.estadoLabels.length)},70%,${t?60:50}%)`),o=t?"#eee":"#333",p={chart:{type:"pie",height:350,foreColor:o,background:"transparent"},title:{text:"Estado Solicitudes",align:"center",style:{color:o,fontSize:"16px",fontWeight:"600"}},series:this.estadoSeries,labels:this.estadoLabels,colors:s,legend:{position:"bottom",labels:{colors:o}},dataLabels:{enabled:!0,formatter:d=>`${d.toFixed(2)}%`,style:{fontSize:"12px",fontWeight:"normal",colors:[o]}},tooltip:{theme:t?"dark":"light",y:{formatter:d=>`${d.toFixed(2)}%`}}};new r(e,p).render()})}fetchWeeklySummary(){let r="https://dashboard3-api-production.up.railway.app/api/dashboard/weekly-summary";return new Promise((e,t)=>{this.http.get(r).subscribe({next:({lastWeek:s,prevWeek:o,difference:p})=>{this.lastWeek=s,this.prevWeek=o,this.difference=p,e()},error:s=>{console.error("Error al cargar resumen semanal:",s),e()}})})}fetchEstadoSummary(){let r="https://dashboard3-api-production.up.railway.app/api/dashboard/estado-summary";return new Promise((e,t)=>{this.http.get(r).subscribe({next:s=>{this.estadoLabels=s.map(o=>o.estado),this.estadoSeries=s.map(o=>o.count),e()},error:s=>{console.error("Error al cargar resumen de estados:",s),e()}})})}fetchPropuestasSummary(){let r="https://dashboard3-api-production.up.railway.app/api/dashboard/won-summary";return new Promise(e=>{this.http.get(r).subscribe({next:t=>{this.proposalsLastWeek=t.won_last_week,this.proposalsDifference=t.difference,e()},error:t=>{console.error("Error resumen propuestas:",t),e()}})})}fetchClientesSummary(){let r="https://dashboard3-api-production.up.railway.app/api/dashboard/summary";return new Promise(e=>{this.http.get(r).subscribe({next:t=>{this.clientesTotal=t.total_clients,this.clientesAvgScore=t.avg_score,e()},error:t=>{console.error("Error resumen clientes:",t),e()}})})}get roundedAvg(){return Math.round(this.clientesAvgScore)}fetchMonthlySummary(){let r="https://dashboard3-api-production.up.railway.app/api/dashboard/monthly-summary";return new Promise(e=>{this.http.get(r).subscribe({next:t=>{let s=new Date,o=String(s.getMonth()+1).padStart(2,"0");this.currentMonthLabel=`${s.getFullYear()}-${o}`,this.monthlyTotal=t.total_actual,this.previousMonthlyTotal=t.total_mes_pasado,this.monthlyDifference=t.porcentaje_cambio,e()},error:t=>{console.error("Error al cargar resumen mensual:",t),this.currentMonthLabel="",this.monthlyTotal=0,this.previousMonthlyTotal=0,this.monthlyDifference=0,e()}})})}fetchOpportunitiesSummary(){let r="https://dashboard3-api-production.up.railway.app/api/dashboard/monthly-opportunities";return new Promise(e=>{this.http.get(r).subscribe({next:t=>{this.serviceChartCategories=t.map(s=>s.mes),this.serviceSeries=t.map(s=>s.total_ganadas),this.fabricationSeries=t.map(s=>s.total_perdidas),e()},error:t=>{console.error("Error al cargar oportunidades mensuales:",t),this.serviceChartCategories=[],this.serviceSeries=[],this.fabricationSeries=[],e()}})})}renderOpportunitiesChart(){return C(this,null,function*(){if(!_(this.platformId))return;let{default:r}=yield import("./chunk-LGABDJFD.js"),e=document.querySelector("#chart");if(!e)return;let t=window.matchMedia("(prefers-color-scheme: dark)").matches,s=t?"#66ff66":"#00A300",o=t?"#ff6666":"#FF0000",p=t?"#eee":"#333",d=t?"#444":"#eee",x={chart:{height:350,type:"line",stacked:!1,foreColor:p,background:"transparent"},title:{text:"Monto Oportunidades Ganadas vs Perdidas por Mes",align:"center",style:{color:p,fontSize:"16px",fontWeight:"600"}},dataLabels:{enabled:!1},series:[{name:"Oportunidad Ganada",data:this.serviceSeries,color:s},{name:"Oportunidad Perdida",data:this.fabricationSeries,color:o}],stroke:{width:[3,3]},xaxis:{categories:this.serviceChartCategories,labels:{style:{colors:p}},axisBorder:{color:d}},yaxis:{labels:{style:{colors:p}},axisBorder:{color:d}},grid:{borderColor:d},legend:{horizontalAlign:"left",offsetX:40,labels:{colors:p}},tooltip:{theme:t?"dark":"light"}};new r(e,x).render()})}fetchHeatmapData(){return this.http.get("https://dashboard3-api-production.up.railway.app/api/dashboard/oportunidades-ganadas-por-mes").toPromise().then(r=>{this.heatmapData=r||[]}).catch(r=>{console.error("fetchHeatmapData error",r),this.heatmapData=[]})}renderHeatmapChart(){return C(this,null,function*(){if(!_(this.platformId))return;let{default:r}=yield import("./chunk-LGABDJFD.js"),e=document.querySelector("#heatmap_chart");if(!e)return;let t=window.matchMedia("(prefers-color-scheme: dark)").matches,s=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],o=new Map;this.heatmapData.forEach(({mes:h,tipo_solicitud:w,total:D})=>{o.has(w)||o.set(w,new Map),o.get(w).set(h,D)});let p=Array.from(o.entries()).map(([h,w])=>({name:h,data:s.map((D,F)=>({x:s[F],y:w.get(F+1)??0}))})),d=t?"#335577":"#B3D9FF",x=t?"#5588AA":"#66B2FF",g=t?"#7799CC":"#005FCC",u=t?"#EEE":"#111",l=t?"#444":"#DDD",m={chart:{type:"heatmap",height:350,foreColor:u,background:"transparent"},title:{text:"Oportunidades Ganadas por Mes y Tipo",align:"center",style:{color:u,fontWeight:"bold"}},xaxis:{categories:s,labels:{style:{colors:Array(12).fill(u)}},axisBorder:{color:l}},yaxis:{labels:{style:{colors:Array(p.length).fill(u)}}},grid:{borderColor:l},series:p,plotOptions:{heatmap:{shadeIntensity:.5,colorScale:{ranges:[{from:0,to:5,name:"Bajo",color:d},{from:6,to:10,name:"Medio",color:x},{from:11,to:20,name:"Alto",color:g}]}}},dataLabels:{enabled:!0,style:{colors:[u]}},tooltip:{theme:t?"dark":"light"},legend:{labels:{colors:u}}};new r(e,m).render()})}fetchMontoPorCeco(){this.http.get("https://dashboard3-api-production.up.railway.app/api/dashboard/ots-monto-por-ceco").subscribe({next:e=>{this.cecoLabels=e.map(t=>t.ceco),this.cecoSeries=e.map(t=>typeof t.total_monto=="number"?t.total_monto:parseFloat(t.total_monto)||0),this.renderCecoChart()},error:e=>{console.error("Error al cargar ots-monto-por-ceco:",e),this.cecoLabels=[],this.cecoSeries=[]}})}renderCecoChart(){return C(this,null,function*(){if(!_(this.platformId))return;let{default:r}=yield import("./chunk-LGABDJFD.js"),e=document.querySelector("#ceco_pie_chart");if(!e)return;let t=this.cecoLabels,s=this.cecoSeries,o=window.matchMedia("(prefers-color-scheme: dark)").matches,p=t.map((g,u)=>`hsl(${Math.round(360*u/t.length)},70%,${o?60:40}%)`),d=o?"#EEE":"#111",x={chart:{type:"pie",height:350,foreColor:d,background:"transparent"},title:{text:"MONTO OT POR UNIDAD DE NEGOCIO",align:"center",style:{color:d}},series:s,labels:t,colors:p,legend:{position:"bottom",labels:{colors:d}},dataLabels:{enabled:!0,formatter:g=>`${g.toFixed(1)}%`,style:{fontSize:"12px",fontWeight:"normal",colors:[d]}},stroke:{width:1,colors:[o?"#333":"#FFF"]},tooltip:{theme:o?"dark":"light",y:{formatter:g=>`$${g.toLocaleString()}`}}};new r(e,x).render()})}fetchSolicitudesMontoPorEstado(){return this.http.get("https://dashboard3-api-production.up.railway.app/api/dashboard/solicitudes-monto-por-estado").toPromise().then(e=>{this.solicitudesMontoPorEstado=e||null}).catch(e=>{console.error("Error al cargar solicitudes-monto-por-estado:",e),this.solicitudesMontoPorEstado=null})}renderMontoFunnelChart(){return C(this,null,function*(){!_(this.platformId)||!this.solicitudesMontoPorEstado||setTimeout(()=>C(this,null,function*(){let r=document.querySelector("#monto_funnel_chart");if(!r){console.error("El elemento #monto_funnel_chart no se encontr\xF3.");return}let e=(yield import("./chunk-LGABDJFD.js")).default,{monto_total:t,monto_propuestas:s,monto_ganadas:o,monto_perdidas:p}=this.solicitudesMontoPorEstado,d=["Monto Total","Monto Propuestas","Monto Ganadas","Monto Perdidas"],x=[t,s,o,p],g=window.matchMedia("(prefers-color-scheme: dark)").matches,u=g?["#4caf50","#ffb300","#29b6f6","#ab47bc"]:["#1b5e20","#f57f17","#01579b","#4a148c"],l=g?"#eee":"#111",m={chart:{type:"bar",height:350,toolbar:{show:!1},foreColor:l,background:"transparent"},plotOptions:{bar:{horizontal:!0,isFunnel:!0,barHeight:"70%",distributed:!0}},colors:u,dataLabels:{enabled:!0,style:{colors:[l],fontSize:"14px",fontWeight:"bold"},formatter:h=>`$${h.toLocaleString()}`},series:[{name:"Monto",data:x}],labels:d,title:{text:"Montos por Estado de Solicitudes",align:"center",style:{color:l,fontWeight:"bold"}},legend:{show:!0,position:"bottom",labels:{colors:l}},tooltip:{theme:g?"dark":"light",y:{formatter:h=>`$${h.toLocaleString()}`}},xaxis:{labels:{style:{colors:Array(x.length).fill(l)}},axisBorder:{color:l}},yaxis:{labels:{style:{colors:Array(x.length).fill(l)}}},grid:{borderColor:g?"#444":"#eee"}};new e(r,m).render()}),0)})}fetchCotizadoresGeneral(){this.http.get("https://dashboard3-api-production.up.railway.app/api/dashboard/cotizadores-general").subscribe({next:e=>{this.cotizadores=e.map(t=>j(H({},t),{porcentaje_concrecion:t.total_asignadas>0?t.total_ganadas/t.total_asignadas*100:0}))},error:e=>{console.error("Error al cargar cotizadores-general:",e),this.cotizadores=[]}})}static \u0275fac=function(e){return new(e||f)(A(W),A(Q),A(te),A(ae))};static \u0275cmp=N({type:f,selectors:[["app-dashboard-3"]],decls:3,vars:2,consts:[[4,"ngIf"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-white","bg-opacity-20","dark:bg-gray-900","dark:bg-opacity-50","backdrop-blur-md"],[1,"bg-white","dark:bg-gray-800","rounded-xl","shadow-2xl","dark:shadow-black/50","p-8","flex","flex-col","items-center","space-y-4","max-w-xs"],[1,"bg-blue-50","dark:bg-blue-900","rounded-full","p-4","flex","items-center","justify-center","w-16","h-16"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-10","w-10","text-blue-600","dark:text-blue-400"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"],[1,"text-2xl","font-semibold","text-gray-800","dark:text-gray-100"],[1,"text-gray-500","dark:text-gray-300","text-center"],[1,"min-h-screen","bg-gray-50","dark:bg-gray-900"],[1,"container","mx-auto","p-4"],[1,"mt-12"],[1,"mb-12","grid","gap-8","md:grid-cols-2","xl:grid-cols-4"],[1,"relative","flex","flex-col","bg-white","dark:bg-gray-900/70","text-gray-800","dark:text-gray-100","rounded-2xl","ring-1","ring-gray-200","dark:ring-gray-700","hover:ring-indigo-300","dark:hover:ring-indigo-600","shadow","hover:shadow-lg","transition-all","duration-300","overflow-visible","cursor-pointer","focus:outline-none","focus:ring-4","focus:ring-indigo-300",3,"routerLink"],[1,"absolute","top-3","right-3","z-20","bg-indigo-600","text-white","text-xs","font-semibold","uppercase","px-3","py-1","rounded-full","shadow-md","transition-colors","duration-300","hover:bg-indigo-700","dark:bg-cyan-400","dark:hover:bg-cyan-500"],[1,"absolute","-mt-8","left-1/2","transform","-translate-x-1/2","bg-gradient-to-tr","from-blue-500","to-blue-300","dark:from-blue-700","dark:to-blue-500","p-4","rounded-full","shadow-lg","dark:shadow-blue-900/50","grid","place-items-center","z-10"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-8","h-8","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d",`M17 20h5v-2a4 4 0 00-3-3.87M9 20H4v-2a4 4 0
           013-3.87m9-4a4 4 0 11-8 0 4 4 0
           018 0zm6 4v1m-6-1v1m-6-1v1`],[1,"pt-12"],[1,"px-6","pb-4","text-center","relative","z-10"],[1,"text-sm","uppercase","tracking-wide","text-gray-500","dark:text-gray-400"],[1,"mt-2","text-3xl","font-bold","text-gray-900","dark:text-white"],[1,"border-t","border-gray-200","dark:border-gray-700","px-6","py-4","flex","justify-center","items-center","space-x-2","bg-white/50","dark:bg-gray-900/50","backdrop-blur-sm","relative","z-10"],[4,"ngFor","ngForOf"],[1,"font-semibold","text-indigo-600","dark:text-indigo-300","text-sm"],[1,"relative","flex","flex-col","bg-white","dark:bg-gray-900/70","text-gray-800","dark:text-gray-100","rounded-2xl","ring-1","ring-gray-200","dark:ring-gray-700","hover:ring-green-300","dark:hover:ring-green-600","shadow","hover:shadow-lg","transition-all","duration-300"],[1,"absolute","-mt-8","left-1/2","transform","-translate-x-1/2","bg-gradient-to-tr","from-green-500","to-green-300","dark:from-green-700","dark:to-green-500","p-4","rounded-full","shadow-lg","dark:shadow-green-900/50","grid","place-items-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d",`M9 5H7a2 2 0 00-2 2v12a2 2 0
                 002 2h10a2 2 0 002-2V7a2 2 0
                 00-2-2h-2M9 3h6M9 3a2 2 0
                 012 2h2a2 2 0 012-2M9 13h6M9 17h6M9 9h6`],[1,"px-6","pb-4","text-center"],[1,"border-t","border-gray-200","dark:border-gray-700","px-6","py-4","text-center"],[1,"font-semibold","text-lg",3,"ngClass"],[1,"ml-1","text-gray-500","dark:text-gray-400","text-sm"],[1,"relative","flex","flex-col","bg-white","dark:bg-gray-900/70","text-gray-800","dark:text-gray-100","rounded-2xl","ring-1","ring-gray-200","dark:ring-gray-700","hover:ring-pink-300","dark:hover:ring-pink-600","shadow","hover:shadow-lg","transition-all","duration-300"],[1,"absolute","-mt-8","left-1/2","transform","-translate-x-1/2","bg-gradient-to-tr","from-pink-500","to-pink-300","dark:from-pink-700","dark:to-pink-500","p-4","rounded-full","shadow-lg","dark:shadow-pink-900/50","grid","place-items-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d",`M9 12l2 2l4-4m-3-5H9a2 2 0 00-2
                 2v12a2 2 0 002 2h6a2 2 0
                 002-2V9a2 2 0 00-2-2h-3m-1-4v4`],[1,"relative","flex","flex-col","bg-white","dark:bg-gray-900/70","text-gray-800","dark:text-gray-100","rounded-2xl","ring-1","ring-gray-200","dark:ring-gray-700","hover:ring-orange-300","dark:hover:ring-orange-600","shadow","hover:shadow-lg","transition-all","duration-300"],[1,"absolute","-mt-8","left-1/2","transform","-translate-x-1/2","bg-gradient-to-tr","from-orange-500","to-orange-300","dark:from-orange-700","dark:to-orange-500","p-4","rounded-full","shadow-lg","dark:shadow-orange-900/50","grid","place-items-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d",`M12 8c-1.657 0-3 .895-3 2s1.343
                 2 3 2 3 .895 3 2-1.343 2-3
                 2M12 4v4m0 8v4`],[1,"border-t","border-gray-200","dark:border-gray-700","px-6","py-4","space-y-1","text-center"],[1,"text-gray-600","dark:text-gray-400","text-sm"],[3,"ngClass"],[1,"space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"relative","flex","flex-col","bg-white","dark:bg-gray-900/70","ring-1","ring-gray-200","dark:ring-gray-700","hover:ring-indigo-300","dark:hover:ring-indigo-600","shadow","hover:shadow-lg","rounded-2xl","transition-all","duration-300","overflow-hidden"],[1,"flex-1","p-4"],["id","chart",1,"w-full","h-80"],[1,"relative","flex","flex-col","bg-white","dark:bg-gray-900/70","ring-1","ring-gray-200","dark:ring-gray-700","hover:ring-green-300","dark:hover:ring-green-600","shadow","hover:shadow-lg","rounded-2xl","transition-all","duration-300","overflow-hidden"],["id","pie_chart",1,"w-full","h-80"],[1,"relative","flex","flex-col","bg-white","dark:bg-gray-900/70","ring-1","ring-gray-200","dark:ring-gray-700","hover:ring-pink-300","dark:hover:ring-pink-600","shadow","hover:shadow-lg","rounded-2xl","transition-all","duration-300","overflow-hidden","max-w-screen-xl","mx-auto","mb-6"],[1,"flex-1","p-6"],["id","ceco_pie_chart",1,"w-full","h-96"],[1,"relative","flex","flex-col","bg-white","dark:bg-gray-900/70","ring-1","ring-gray-200","dark:ring-gray-700","hover:ring-blue-300","dark:hover:ring-blue-600","shadow","hover:shadow-lg","rounded-2xl","transition-all","duration-300","overflow-hidden","max-w-screen-xl","mx-auto","mb-6","cursor-pointer"],["id","pie_chart_2",1,"w-full","h-96"],[1,"px-6","pb-4","text-center","text-sm","italic","text-gray-600","dark:text-gray-400","bg-gray-50","dark:bg-gray-900/50","border-t","border-gray-200","dark:border-gray-700"],[1,"relative","flex","flex-col","bg-white","dark:bg-gray-900/70","ring-1","ring-gray-200","dark:ring-gray-700","hover:ring-orange-300","dark:hover:ring-orange-600","shadow","hover:shadow-lg","rounded-2xl","transition-all","duration-300","overflow-hidden","mb-6"],["id","monto_funnel_chart",1,"w-full","h-96"],[1,"relative","flex","flex-col","bg-white","dark:bg-gray-900/70","ring-1","ring-gray-200","dark:ring-gray-700","hover:ring-teal-300","dark:hover:ring-teal-600","shadow","hover:shadow-lg","rounded-2xl","transition-all","duration-300","overflow-hidden"],["id","heatmap_chart",1,"w-full","h-64"],[1,"overflow-x-auto","bg-gray-50","dark:bg-gray-900/50","ring-1","ring-transparent","hover:ring-indigo-300","dark:hover:ring-indigo-600","rounded-2xl","shadow-md","hover:shadow-lg","transition-all","duration-300","p-4","mb-6"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"bg-gradient-to-r","from-indigo-100","to-indigo-50","dark:from-indigo-800","dark:to-indigo-700"],[1,"px-4","py-2","text-left","text-xs","font-semibold","uppercase","tracking-wider","text-gray-600","dark:text-gray-300"],[1,"px-4","py-2","text-right","text-xs","font-semibold","uppercase","tracking-wider","text-gray-600","dark:text-gray-300"],[1,"px-4","py-2","text-right","text-xs","font-semibold","uppercase","tracking-wider","text-green-600","dark:text-green-400"],[1,"px-4","py-2","text-right","text-xs","font-semibold","uppercase","tracking-wider","text-blue-600","dark:text-blue-400"],[1,"divide-y","divide-gray-100","dark:divide-gray-700"],[3,"class",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5",3,"ngClass"],["d",`M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286
             3.974a1 1 0 00.950.69h4.178c.969 0
             1.371 1.24.588 1.81l-3.382
             2.455a1 1 0 00-.364 1.118l1.286
             3.974c.3.921-.755 1.688-1.54
             1.118l-3.382-2.455a1 1 0
             00-1.175 0l-3.382 2.455c-.784.57-1.838-.197-1.539-1.118l1.286-3.974a1
             1 0 00-.364-1.118L2.049
             9.401c-.783-.57-.38-1.81.588-1.81h4.178a1
             1 0 00.950-.69L9.049 2.927z`],[1,"px-4","py-3","whitespace-nowrap","text-sm","text-gray-700","dark:text-gray-300"],[1,"px-4","py-3","whitespace-nowrap","text-sm","font-medium","text-gray-900","dark:text-gray-100"],[1,"px-4","py-3","whitespace-nowrap","text-sm","text-right","text-gray-700","dark:text-gray-300"],[1,"px-4","py-3","whitespace-nowrap","text-sm","text-right","text-green-600","dark:text-green-400","font-semibold"],[1,"px-4","py-3","whitespace-nowrap","text-sm","text-right","text-blue-600","dark:text-blue-400","font-semibold"]],template:function(e,t){e&1&&(z(0,de,11,0,"ng-container",0)(1,me,117,34,"ng-container",0),b(2,"router-outlet")),e&2&&(k("ngIf",t.isLoading),c(),k("ngIf",!t.route.firstChild))},dependencies:[ie,Z,K,J,U,X,Y,re],encapsulation:2})};export{oe as Dashboard3Component};
