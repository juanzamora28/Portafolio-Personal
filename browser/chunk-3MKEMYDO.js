import{a as H,b as Z}from"./chunk-NKRFROHD.js";function at(t){return typeof t=="object"&&t!==null&&"x"in t&&"y"in t&&"unit"in t&&typeof t.unit=="string"&&typeof t.x=="object"&&typeof t.y=="object"&&"topLeft"in t.x&&"topRight"in t.x&&"bottomRight"in t.x&&"bottomLeft"in t.x&&"topLeft"in t.y&&"topRight"in t.y&&"bottomRight"in t.y&&"bottomLeft"in t.y}function mt(t){var e;let n=t.match(/(\d+(?:\.\d+)?)(px|%)/g);if(!n)return{x:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},y:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},unit:"px"};let o=n.map(h=>{let[d,f,b]=h.match(/(\d+(?:\.\d+)?)(px|%)/)??[];return{value:parseFloat(f),unit:b}}),i=((e=o[0])==null?void 0:e.unit)||"px";if(o.some(h=>h.unit!==i))throw new Error("Inconsistent units in border-radius string.");let[s,a,l,c]=o.map(h=>h.value),p={topLeft:s??0,topRight:a??s??0,bottomRight:l??s??0,bottomLeft:c??a??s??0};return{x:H({},p),y:H({},p),unit:i}}function yt({x:t,y:e,unit:n},o,i){if(n==="px"){let s={topLeft:t.topLeft/o,topRight:t.topRight/o,bottomLeft:t.bottomLeft/o,bottomRight:t.bottomRight/o},a={topLeft:e.topLeft/i,topRight:e.topRight/i,bottomLeft:e.bottomLeft/i,bottomRight:e.bottomRight/i};return{x:s,y:a,unit:"px"}}else if(n==="%")return{x:t,y:e,unit:"%"};return{x:t,y:e,unit:n}}function J(t){return`
    ${t.x.topLeft}${t.unit} ${t.x.topRight}${t.unit} ${t.x.bottomRight}${t.unit} ${t.x.bottomLeft}${t.unit}
    /
    ${t.y.topLeft}${t.unit} ${t.y.topRight}${t.unit} ${t.y.bottomRight}${t.unit} ${t.y.bottomLeft}${t.unit}
  `}function st(t){return t.x.topLeft===0&&t.x.topRight===0&&t.x.bottomRight===0&&t.x.bottomLeft===0&&t.y.topLeft===0&&t.y.topRight===0&&t.y.bottomRight===0&&t.y.bottomLeft===0}function ct(t){return typeof t=="object"&&"x"in t&&"y"in t}function D(t,e){return{x:t,y:e}}function Rt(t,e){return D(t.x+e.x,t.y+e.y)}function St(t,e){return D(t.x-e.x,t.y-e.y)}function Et(t,e){return D(t.x*e,t.y*e)}function $(t,e,n){return t+(e-t)*n}function It(t,e,n){return Rt(t,Et(St(e,t),n))}function gt(t,e,n){return{x:{topLeft:$(t.x.topLeft,e.x.topLeft,n),topRight:$(t.x.topRight,e.x.topRight,n),bottomRight:$(t.x.bottomRight,e.x.bottomRight,n),bottomLeft:$(t.x.bottomLeft,e.x.bottomLeft,n)},y:{topLeft:$(t.y.topLeft,e.y.topLeft,n),topRight:$(t.y.topRight,e.y.topRight,n),bottomRight:$(t.y.bottomRight,e.y.bottomRight,n),bottomLeft:$(t.y.bottomLeft,e.y.bottomLeft,n)},unit:t.unit}}function Lt(t,e,n){return N((n-t)/(e-t),0,1)}function G(t,e,n,o,i){return $(n,o,Lt(t,e,i))}function N(t,e,n){return Math.min(Math.max(t,e),n)}var Mt={duration:350,easing:t=>t};function wt(t,e,n,o){let i=!1,s=()=>{i=!0},a=H(H({},Mt),o),l;function c(p){l===void 0&&(l=p);let h=p-l,d=N(h/a.duration,0,1),f=Object.keys(t),b=Object.keys(e);if(!f.every(u=>b.includes(u))){console.error("animate Error: `from` keys are different than `to`");return}let w={};f.forEach(u=>{typeof t[u]=="number"&&typeof e[u]=="number"?w[u]=$(t[u],e[u],a.easing(d)):at(t[u])&&at(e[u])?w[u]=gt(t[u],e[u],a.easing(d)):ct(t[u])&&ct(e[u])&&(w[u]=It(t[u],e[u],a.easing(d)))}),n(w,d>=1,d),d<1&&!i&&requestAnimationFrame(c)}return requestAnimationFrame(c),s}var Xt={startDelay:0,targetEl:null};function Yt(t,e){let n=H(H({},Xt),e),o=t.el(),i=!1,s=null,a=null,l=null,c=null,p=0,h=0,d=0,f=0,b=0,w=0,u=0,I=0,r=0,E=0,R=null,y;o.addEventListener("pointerdown",S),document.body.addEventListener("pointerup",v),document.body.addEventListener("pointermove",L),document.body.addEventListener("touchmove",Y,{passive:!1});function S(m){if(n.targetEl&&m.target!==n.targetEl&&!n.targetEl.contains(m.target)||i||!m.isPrimary)return;n.startDelay>0?(l?.({el:m.target}),y=setTimeout(()=>{F()},n.startDelay)):F();function F(){R=m.target;let A=t.boundingRect(),z=t.layoutRect();b=z.x,w=z.y,d=A.x-b,f=A.y-w,p=m.clientX-d,h=m.clientY-f,u=m.clientX,I=m.clientY,r=(m.clientX-A.x)/A.width,E=(m.clientY-A.y)/A.height,i=!0,L(m)}}function g(){let m=t.layoutRect();p-=b-m.x,h-=w-m.y,b=m.x,w=m.y}function v(m){if(!i){y&&(clearTimeout(y),y=null,c?.({el:m.target}));return}if(!m.isPrimary)return;i=!1;let F=m.clientX-u,A=m.clientY-I;a?.({x:d,y:f,pointerX:m.clientX,pointerY:m.clientY,width:F,height:A,relativeX:r,relativeY:E,el:R}),R=null}function L(m){if(!i){y&&(clearTimeout(y),y=null,c?.({el:m.target}));return}if(!m.isPrimary)return;let F=m.clientX-u,A=m.clientY-I,z=d=m.clientX-p,K=f=m.clientY-h;s?.({width:F,height:A,x:z,y:K,pointerX:m.clientX,pointerY:m.clientY,relativeX:r,relativeY:E,el:R})}function Y(m){if(!i)return!0;m.preventDefault()}function M(m){s=m}function C(m){a=m}function O(m){l=m}function j(m){c=m}function B(){o.removeEventListener("pointerdown",S),o=t.el(),o.addEventListener("pointerdown",S)}function W(){t.el().removeEventListener("pointerdown",S),document.body.removeEventListener("pointerup",v),document.body.removeEventListener("pointermove",L),document.body.removeEventListener("touchmove",Y),s=null,a=null,l=null,c=null}return{onDrag:M,onDrop:C,onHold:O,onRelease:j,onElementUpdate:B,destroy:W,readjust:g}}function At(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}function Tt(t){return 1-Math.pow(1-t,3)}function U(t){return{x:t.x,y:t.y,width:t.width,height:t.height}}function Ht(t){let e=t.getBoundingClientRect(),n=0,o=0,i=t.parentElement;for(;i;){let s=getComputedStyle(i).transform;if(s&&s!=="none"){let a=s.match(/matrix.*\((.+)\)/);if(a){let l=a[1].split(", ").map(Number);n+=l[4]||0,o+=l[5]||0}}i=i.parentElement}return{y:e.top-o,x:e.left-n,width:e.width,height:e.height}}function tt(t){let e=t,n=0,o=0;for(;e;)n+=e.offsetTop,o+=e.offsetLeft,e=e.offsetParent;return{x:o,y:n,width:t.offsetWidth,height:t.offsetHeight}}function ut(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}function $t(t){let e=t,n=0,o=0;for(;e;){let i=s=>{let a=getComputedStyle(s);return/(auto|scroll)/.test(a.overflow+a.overflowY+a.overflowX)};if(e===document.body){o+=window.scrollX,n+=window.scrollY;break}i(e)&&(o+=e.scrollLeft,n+=e.scrollTop),e=e.parentElement}return{x:o,y:n}}function et(t){let e="unread",n,o,i,s,a,l,c,p,h,d,f;function b(){n=t.currentTransform(),o=Ht(t.el()),i=$t(t.el()),f=dt(t.el()).map(({parent:r,children:E})=>({parent:{el:r,initialRect:U(r.getBoundingClientRect())},children:E.filter(R=>R instanceof HTMLElement).map(R=>{let y=R;return y.originalBorderRadius||(y.originalBorderRadius=getComputedStyle(R).borderRadius),{el:R,borderRadius:mt(y.originalBorderRadius),initialRect:U(R.getBoundingClientRect())}})})),e="readInitial"}function w(){if(e!=="readInitial")throw new Error("FlipView: Cannot read final values before reading initial values");h=t.layoutRect(),l=o.width/h.width,c=o.height/h.height,s=o.x-h.x-n.dragX+i.x,a=o.y-h.y-n.dragY+i.y,p=yt(t.borderRadius(),l,c);let r=dt(t.el());f=f.map(({parent:R,children:y},S)=>{let g=r[S].parent;return{parent:Z(H({},R),{el:g,finalRect:tt(g)}),children:y.map((v,L)=>{let Y=r[S].children[L],M=tt(Y);return Y.hasAttribute("data-swapy-text")&&(M=Z(H({},M),{width:v.initialRect.width,height:v.initialRect.height})),Z(H({},v),{el:Y,finalRect:M})})}});let E={translateX:s,translateY:a,scaleX:l,scaleY:c};t.el().style.transformOrigin="0 0",t.el().style.borderRadius=J(p),t.setTransform(E),d=[],f.forEach(({parent:R,children:y})=>{let S=y.map(({el:g,initialRect:v,finalRect:L,borderRadius:Y})=>Dt(g,v,L,Y,R.initialRect,R.finalRect));d.push(...S)}),e="readFinal"}function u(){if(e!=="readFinal")throw new Error("FlipView: Cannot get transition values before reading");return{from:{width:o.width,height:o.height,translate:D(s,a),scale:D(l,c),borderRadius:p},to:{width:h.width,height:h.height,translate:D(0,0),scale:D(1,1),borderRadius:t.borderRadius()}}}function I(){if(e!=="readFinal")throw new Error("FlipView: Cannot get children transition values before reading");return d}return{readInitial:b,readFinalAndReverse:w,transitionValues:u,childrenTransitionData:I}}function Dt(t,e,n,o,i,s){t.style.transformOrigin="0 0";let a=i.width/s.width,l=i.height/s.height,c=e.width/n.width,p=e.height/n.height,h=yt(o,c,p),d=e.x-i.x,f=n.x-s.x,b=e.y-i.y,w=n.y-s.y,u=(d-f*a)/a,I=(b-w*l)/l;return t.style.transform=`translate(${u}px, ${I}px) scale(${c/a}, ${p/l})`,t.style.borderRadius=J(h),{el:t,fromTranslate:D(u,I),fromScale:D(c,p),fromBorderRadius:h,toBorderRadius:o,parentScale:{x:a,y:l}}}function dt(t){let e=[];function n(o){let i=Array.from(o.children).filter(s=>s instanceof HTMLElement);i.length>0&&(e.push({parent:o,children:i}),i.forEach(s=>n(s)))}return n(t),e}function vt(t){let e=[],n=t,o={dragX:0,dragY:0,translateX:0,translateY:0,scaleX:1,scaleY:1},i=mt(window.getComputedStyle(n).borderRadius),s={el:()=>n,setTransform:a,clearTransform:l,currentTransform:()=>o,borderRadius:()=>i,layoutRect:()=>tt(n),boundingRect:()=>U(n.getBoundingClientRect()),usePlugin:p,destroy:h,updateElement:d};function a(f){o=H(H({},o),f),c()}function l(){o={dragX:0,dragY:0,translateX:0,translateY:0,scaleX:1,scaleY:1},c()}function c(){let{dragX:f,dragY:b,translateX:w,translateY:u,scaleX:I,scaleY:r}=o;f===0&&b===0&&w===0&&u===0&&I===1&&r===1?n.style.transform="":n.style.transform=`translate(${f+w}px, ${b+u}px) scale(${I}, ${r})`}function p(f,b){let w=f(s,b);return e.push(w),w}function h(){e.forEach(f=>f.destroy())}function d(f){if(!f)return;let b=n.hasAttribute("data-swapy-dragging"),w=n.style.cssText;n=f,b&&n.setAttribute("data-swapy-dragging",""),n.style.cssText=w,e.forEach(u=>u.onElementUpdate())}return s}function Ct(t,e,n){return n.map(o=>({slotId:o.slot,itemId:o.item,item:o.item===""?null:t.find(i=>o.item===i[e])}))}function Bt(t,e){return t.map(n=>({item:n[e],slot:n[e]}))}function Ft(t,e,n,o,i,s=!1){let a=e.filter(p=>!o.some(h=>h.item===p[n])).map(p=>({slot:p[n],item:p[n]})),l;s?l=o.map(p=>e.some(h=>h[n]===p.item)?p:{slot:p.slot,item:""}):l=o.filter(p=>e.some(h=>h[n]===p.item)||!p.item);let c=[...l,...a];i(c),(a.length>0||l.length!==o.length)&&requestAnimationFrame(()=>{t?.update()})}var Vt=Object.freeze(Object.defineProperty({__proto__:null,dynamicSwapy:Ft,initSlotItemMap:Bt,toSlottedItems:Ct},Symbol.toStringTag,{value:"Module"})),qt={animation:"dynamic",enabled:!0,swapMode:"hover",dragOnHold:!1,autoScrollOnDrag:!1,dragAxis:"both",manualSwap:!1};function xt(t){switch(t){case"dynamic":return{easing:Tt,duration:300};case"spring":return{easing:At,duration:350};case"none":return{easing:e=>e,duration:1}}}function Nt(t,e){let n=H(H({},qt),e),o=Ot({slots:[],items:[],config:n}),i=[],s=[];a();function a(){if(!zt(t))throw new Error("Cannot create a Swapy instance because your HTML structure is invalid. Fix all above errors and then try!");i=Array.from(t.querySelectorAll("[data-swapy-slot]")).map(r=>jt(r,o)),o.setSlots(i),s=Array.from(t.querySelectorAll("[data-swapy-item]")).map(r=>Wt(r,o)),o.setItems(s),o.syncSlotItemMap(),s.forEach(r=>{r.onDrag(({pointerX:E,pointerY:R})=>{c();let y=!1;i.forEach(S=>{let g=S.rect();ut({x:E,y:R},g)&&(y=!0,S.isHighlighted()||S.highlight())}),!y&&o.config().swapMode==="drop"&&r.slot().highlight(),n.swapMode==="hover"&&l(r,{pointerX:E,pointerY:R})}),r.onDrop(({pointerX:E,pointerY:R})=>{p(),n.swapMode==="drop"&&l(r,{pointerX:E,pointerY:R})}),r.onHold(()=>{c()}),r.onRelease(()=>{p()})})}function l(r,{pointerX:E,pointerY:R}){i.forEach(y=>{let S=y.rect();if(ut({x:E,y:R},S)){if(r.id()===y.itemId())return;o.config().swapMode==="hover"&&r.setContinuousDrag(!0);let g=r.slot(),v=y.item();if(!o.eventHandlers().onBeforeSwap({fromSlot:g.id(),toSlot:y.id(),draggingItem:r.id(),swapWithItem:v?.id()||""}))return;if(o.config().manualSwap){let L=structuredClone(o.slotItemMap());o.swapItems(r,y);let Y=o.slotItemMap(),M=et(r.view());M.readInitial();let C=v?et(v.view()):null;C?.readInitial();let O=0,j=0,B=ot(r.view().el());B instanceof Window?(O=B.scrollY,j=B.scrollX):(O=B.scrollTop,j=B.scrollLeft),o.eventHandlers().onSwap({oldSlotItemMap:L,newSlotItemMap:Y,fromSlot:g.id(),toSlot:y.id(),draggingItem:r.id(),swappedWithItem:v?.id()||""}),requestAnimationFrame(()=>{let W=t.querySelectorAll("[data-swapy-item]");o.items().forEach(m=>{let F=Array.from(W).find(A=>A.dataset.swapyItem===m.id());m.view().updateElement(F)}),o.syncSlotItemMap(),M.readFinalAndReverse(),C?.readFinalAndReverse(),nt(r,M),v&&C&&nt(v,C),B.scrollTo({left:j,top:O})})}else{let L=0,Y=0,M=ot(r.view().el());M instanceof Window?(L=M.scrollY,Y=M.scrollX):(L=M.scrollTop,Y=M.scrollLeft),ft(r,y,!0),v&&ft(v,g),M.scrollTo({left:Y,top:L});let C=o.slotItemMap();o.syncSlotItemMap();let O=o.slotItemMap();o.eventHandlers().onSwap({oldSlotItemMap:C,newSlotItemMap:O,fromSlot:g.id(),toSlot:y.id(),draggingItem:r.id(),swappedWithItem:v?.id()||""})}}})}function c(){t.querySelectorAll("img").forEach(r=>{r.style.pointerEvents="none"}),t.style.userSelect="none",t.style.webkitUserSelect="none"}function p(){t.querySelectorAll("img").forEach(r=>{r.style.pointerEvents=""}),t.style.userSelect="",t.style.webkitUserSelect=""}function h(r){o.config().enabled=r}function d(r){o.eventHandlers().onSwapStart=r}function f(r){o.eventHandlers().onSwap=r}function b(r){o.eventHandlers().onSwapEnd=r}function w(r){o.eventHandlers().onBeforeSwap=r}function u(){I(),requestAnimationFrame(()=>{a()})}function I(){s.forEach(r=>r.destroy()),i.forEach(r=>r.destroy()),o.destroy(),s=[],i=[]}return{enable:h,slotItemMap:()=>o.slotItemMap(),onSwapStart:d,onSwap:f,onSwapEnd:b,onBeforeSwap:w,update:u,destroy:I}}function Ot({slots:t,items:e,config:n}){let o={slots:t,items:e,config:n,slotItemMap:{asObject:{},asMap:new Map,asArray:[]},zIndexCount:1,eventHandlers:{onSwapStart:()=>{},onSwap:()=>{},onSwapEnd:()=>{},onBeforeSwap:()=>!0},scrollOffsetWhileDragging:{x:0,y:0},scrollHandler:null},i=H({},o),s=d=>{var f;(f=i.scrollHandler)==null||f.call(i,d)};window.addEventListener("scroll",s);function a(d){return i.slots.find(f=>f.id()===d)}function l(d){return i.items.find(f=>f.id()===d)}function c(){let d={},f=new Map,b=[];i.slots.forEach(w=>{var u;let I=w.id(),r=((u=w.item())==null?void 0:u.id())||"";d[I]=r,f.set(I,r),b.push({slot:I,item:r})}),i.slotItemMap={asObject:d,asMap:f,asArray:b}}function p(d,f){var b;let w=i.slotItemMap,u=d.id(),I=((b=f.item())==null?void 0:b.id())||"",r=f.id(),E=d.slot().id();w.asObject[r]=u,w.asObject[E]=I,w.asMap.set(r,u),w.asMap.set(E,I);let R=w.asArray.findIndex(S=>S.slot===r),y=w.asArray.findIndex(S=>S.slot===E);w.asArray[R].item=u,w.asArray[y].item=I}function h(){window.removeEventListener("scroll",s),i=H({},o)}return{slots:()=>i.slots,items:()=>i.items,config:()=>n,setItems:d=>i.items=d,setSlots:d=>i.slots=d,slotById:a,itemById:l,zIndex:(d=!1)=>d?++i.zIndexCount:i.zIndexCount,resetZIndex:()=>{i.zIndexCount=1},eventHandlers:()=>i.eventHandlers,syncSlotItemMap:c,slotItemMap:(d=!1)=>d?structuredClone(i.slotItemMap):i.slotItemMap,onScroll:d=>{i.scrollHandler=d},swapItems:p,destroy:h}}function jt(t,e){let n=vt(t);function o(){return n.el().dataset.swapySlot}function i(){let h=n.el().children[0];return h?.dataset.swapyItem||null}function s(){return U(n.el().getBoundingClientRect())}function a(){let h=n.el().children[0];if(h)return e.itemById(h.dataset.swapyItem)}function l(){e.slots().forEach(h=>{h.view().el().removeAttribute("data-swapy-highlighted")})}function c(){l(),n.el().setAttribute("data-swapy-highlighted","")}function p(){}return{id:o,view:()=>n,itemId:i,rect:s,item:a,highlight:c,unhighlightAllSlots:l,isHighlighted:()=>n.el().hasAttribute("data-swapy-highlighted"),destroy:p}}function Wt(t,e){let n=vt(t),o={},i=null,s=null,a=!1,l=!0,c,p=Pt(),h=()=>{},d=()=>{},f=()=>{},b=()=>{},{onDrag:w,onDrop:u,onHold:I,onRelease:r}=n.usePlugin(Yt,{startDelay:e.config().dragOnHold?400:0,targetEl:j()}),E=D(0,0),R=D(0,0),y=D(0,0),S=D(0,0),g=null,v=null;I(x=>{e.config().enabled&&(W()&&!B(x.el)||A()&&F(x.el)||f==null||f(x))}),r(x=>{e.config().enabled&&(W()&&!B(x.el)||A()&&F(x.el)||b==null||b(x))});function L(x){var X;z(),Q().highlight(),(X=o.drop)==null||X.call(o);let T=e.slots().map(q=>q.view().boundingRect());e.slots().forEach((q,k)=>{let _=T[k];q.view().el().style.width=`${_.width}px`,q.view().el().style.maxWidth=`${_.width}px`,q.view().el().style.flexShrink="0",q.view().el().style.height=`${_.height}px`});let P=e.slotItemMap(!0);e.eventHandlers().onSwapStart({draggingItem:it(),fromSlot:rt(),slotItemMap:P}),s=P,n.el().style.position="relative",n.el().style.zIndex=`${e.zIndex(!0)}`,g=ot(x.el),e.config().autoScrollOnDrag&&(i=_t(g,e.config().dragAxis),i.updatePointer({x:x.pointerX,y:x.pointerY})),E.x=window.scrollX,E.y=window.scrollY,y.x=0,y.y=0,g instanceof HTMLElement&&(R.x=g.scrollLeft,R.y=g.scrollTop,v=()=>{S.x=g.scrollLeft-R.x,S.y=g.scrollTop-R.y,n.setTransform({dragX:(c?.width||0)+y.x+S.x,dragY:(c?.height||0)+y.y+S.y})},g.addEventListener("scroll",v)),e.onScroll(()=>{y.x=window.scrollX-E.x,y.y=window.scrollY-E.y;let q=S.x||0,k=S.y||0;n.setTransform({dragX:(c?.width||0)+y.x+q,dragY:(c?.height||0)+y.y+k})})}w(x=>{var X;if(e.config().enabled){if(!a){if(W()&&!B(x.el)||A()&&F(x.el))return;L(x)}a=!0,i&&i.updatePointer({x:x.pointerX,y:x.pointerY}),c=x,(X=o.drop)==null||X.call(o),p(()=>{n.el().style.position="relative";let T=x.width+y.x+S.x,P=x.height+y.y+S.y;e.config().dragAxis==="y"?n.setTransform({dragY:P}):e.config().dragAxis==="x"?n.setTransform({dragX:T}):n.setTransform({dragX:T,dragY:P}),h?.(x)})}}),u(x=>{if(!a)return;K(),a=!1,l=!1,c=null,g&&(g.removeEventListener("scroll",v),v=null),g=null,S.x=0,S.y=0,y.x=0,y.y=0,i&&(i.destroy(),i=null),Q().unhighlightAllSlots(),d?.(x),e.eventHandlers().onSwapEnd({slotItemMap:e.slotItemMap(),hasChanged:s!=null&&s.asMap?!kt(s?.asMap,e.slotItemMap().asMap):!1}),s=null,e.onScroll(null),e.slots().forEach(T=>{T.view().el().style.width="",T.view().el().style.maxWidth="",T.view().el().style.flexShrink="",T.view().el().style.height=""}),e.config().manualSwap&&e.config().swapMode==="drop"?requestAnimationFrame(X):X();function X(){let T=n.currentTransform(),P=T.dragX+T.translateX,q=T.dragY+T.translateY;o.drop=wt({translate:D(P,q)},{translate:D(0,0)},({translate:k},_)=>{_?a||(n.clearTransform(),n.el().style.transformOrigin=""):n.setTransform({dragX:0,dragY:0,translateX:k.x,translateY:k.y}),_&&(e.items().forEach(lt=>{lt.isDragging()||(lt.view().el().style.zIndex="")}),e.resetZIndex(),n.el().style.position="",l=!0)},xt(e.config().animation))}});function Y(x){h=x}function M(x){d=x}function C(x){f=x}function O(x){b=x}function j(){return n.el().querySelector("[data-swapy-handle]")}function B(x){let X=j();return X?X===x||X.contains(x):!1}function W(){return j()!==null}function m(){return Array.from(n.el().querySelectorAll("[data-swapy-no-drag]"))}function F(x){let X=m();return!X||X.length===0?!1:X.includes(x)||X.some(T=>T.contains(x))}function A(){return m().length>0}function z(){n.el().setAttribute("data-swapy-dragging","")}function K(){n.el().removeAttribute("data-swapy-dragging")}function bt(){h=null,d=null,f=null,b=null,c=null,s=null,i&&(i.destroy(),i=null),g&&v&&g.removeEventListener("scroll",v),n.destroy()}function it(){return n.el().dataset.swapyItem}function Q(){return e.slotById(n.el().parentElement.dataset.swapySlot)}function rt(){return n.el().parentElement.dataset.swapySlot}return{id:it,view:()=>n,slot:Q,slotId:rt,onDrag:Y,onDrop:M,onHold:C,onRelease:O,destroy:bt,isDragging:()=>a,cancelAnimation:()=>o,dragEvent:()=>c,store:()=>e,continuousDrag:()=>l,setContinuousDrag:x=>l=x}}function ft(t,e,n=!1){if(n){let i=e.item();i&&(e.view().el().style.position="relative",i.view().el().style.position="absolute")}else{let i=t.slot();i.view().el().style.position="",t.view().el().style.position=""}if(!t)return;let o=et(t.view());o.readInitial(),e.view().el().appendChild(t.view().el()),o.readFinalAndReverse(),nt(t,o)}function Pt(){let t=!1;return e=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}function nt(t,e){var n,o,i,s;(o=(n=t.cancelAnimation()).moveToSlot)==null||o.call(n),(s=(i=t.cancelAnimation()).drop)==null||s.call(i);let a=xt(t.store().config().animation),l=e.transitionValues(),c=t.view().currentTransform(),p=0,h=!1;t.cancelAnimation().moveToSlot=wt({translate:l.from.translate,scale:l.from.scale,borderRadius:l.from.borderRadius},{translate:l.to.translate,scale:l.to.scale,borderRadius:l.to.borderRadius},({translate:d,scale:f,borderRadius:b},w,u)=>{if(t.isDragging()){p!==0&&(h=!0);let r=t.dragEvent().relativeX,E=t.dragEvent().relativeY;t.continuousDrag()?t.view().setTransform({translateX:$(c.translateX,c.translateX+(l.from.width-l.to.width)*r,a.easing(u-p)),translateY:$(c.translateY,c.translateY+(l.from.height-l.to.height)*E,a.easing(u-p)),scaleX:f.x,scaleY:f.y}):t.view().setTransform({scaleX:f.x,scaleY:f.y})}else c=t.view().currentTransform(),p=u,h?t.view().setTransform({scaleX:f.x,scaleY:f.y}):t.view().setTransform({dragX:0,dragY:0,translateX:d.x,translateY:d.y,scaleX:f.x,scaleY:f.y});let I=e.childrenTransitionData();I.forEach(({el:r,fromTranslate:E,fromScale:R,fromBorderRadius:y,toBorderRadius:S,parentScale:g})=>{let v=$(g.x,1,a.easing(u)),L=$(g.y,1,a.easing(u));r.style.transform=`translate(${E.x+(0-E.x/v)*a.easing(u)}px, ${E.y+(0-E.y/L)*a.easing(u)}px) scale(${$(R.x/v,1/v,a.easing(u))}, ${$(R.y/L,1/L,a.easing(u))})`,st(y)||(r.style.borderRadius=J(gt(y,S,a.easing(u))))}),st(b)||(t.view().el().style.borderRadius=J(b)),w&&(t.isDragging()||(t.view().el().style.transformOrigin="",t.view().clearTransform()),t.view().el().style.borderRadius="",I.forEach(({el:r})=>{r.style.transform="",r.style.transformOrigin="",r.style.borderRadius=""}))},a)}function V(...t){console.error("Swapy Error:",...t)}function zt(t){let e=t,n=!0,o=e.querySelectorAll("[data-swapy-slot]");e||(V("container passed to createSwapy() is undefined or null"),n=!1),o.forEach(l=>{let c=l,p=c.dataset.swapySlot,h=c.children,d=h[0];(!p||p.length===0)&&(V(c,"does not contain a slotId using data-swapy-slot"),n=!1),h.length>1&&(V("slot:",`"${p}"`,"cannot contain more than one element"),n=!1),d&&(!d.dataset.swapyItem||d.dataset.swapyItem.length===0)&&(V("slot",`"${p}"`,"does not contain an element with an item id using data-swapy-item"),n=!1)});let i=Array.from(o).map(l=>l.dataset.swapySlot),s=e.querySelectorAll("[data-swapy-item]"),a=Array.from(s).map(l=>l.dataset.swapyItem);if(pt(i)){let l=ht(i);V("your container has duplicate slot ids",`(${l.join(", ")})`),n=!1}if(pt(a)){let l=ht(a);V("your container has duplicate item ids",`(${l.join(", ")})`),n=!1}return n}function pt(t){return new Set(t).size!==t.length}function ht(t){let e=new Set,n=new Set;for(let o of t)e.has(o)?n.add(o):e.add(o);return Array.from(n)}function kt(t,e){if(t.size!==e.size)return!1;for(let[n,o]of t)if(e.get(n)!==o)return!1;return!0}function ot(t){let e=t;for(;e;){let n=window.getComputedStyle(e),o=n.overflowY,i=n.overflowX;if((o==="auto"||o==="scroll")&&e.scrollHeight>e.clientHeight||(i==="auto"||i==="scroll")&&e.scrollWidth>e.clientWidth)return e;e=e.parentElement}return window}function _t(t,e){let n=!1,o,i=0,s=0,a=0,l=0,c=0,p=0,h=null;t instanceof HTMLElement?(o=U(t.getBoundingClientRect()),i=t.scrollHeight-o.height,s=t.scrollWidth-o.width):(o={x:0,y:0,width:window.innerWidth,height:window.innerHeight},i=document.documentElement.scrollHeight-window.innerHeight,s=document.documentElement.scrollWidth-window.innerWidth);function d(){t instanceof HTMLElement?(a=t.scrollTop,l=t.scrollLeft):(a=window.scrollY,l=window.scrollX)}function f(u){n=!1;let I=o.y,r=o.y+o.height,E=o.x,R=o.x+o.width,y=Math.abs(I-u.y)<Math.abs(r-u.y),S=Math.abs(E-u.x)<Math.abs(R-u.x);if(d(),e!=="x")if(y){let g=I-u.y;if(g>=-100){let v=N(g,-100,0);c=-G(-100,0,0,5,v),n=!0}}else{let g=r-u.y;if(g<=100){let v=N(g,0,100);c=G(100,0,0,5,v),n=!0}}if(e!=="y")if(S){let g=E-u.x;if(g>=-100){let v=N(g,-100,0);p=-G(-100,0,0,5,v),n=!0}}else{let g=R-u.x;if(g<=100){let v=N(g,0,100);p=G(100,0,0,5,v),n=!0}}n&&(h&&cancelAnimationFrame(h),b())}function b(){d(),e!=="x"&&(c=a+c>=i?0:c),e!=="y"&&(p=l+p>=s?0:p),t.scrollBy({top:c,left:p}),n&&(h=requestAnimationFrame(b))}function w(){n=!1}return{updatePointer:f,destroy:w}}export{Nt as createSwapy,ot as getClosestScrollableContainer,Vt as utils};
