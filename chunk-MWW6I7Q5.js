import{e as F,f as N}from"./chunk-BCEJU3MW.js";import{a as V,b as O,c as R}from"./chunk-NSD7ZKFA.js";import{Cb as E,Da as k,Db as T,Ga as p,Jb as G,Na as d,Qa as i,Ra as r,Sa as c,Ta as v,Ua as y,V as _,Va as C,W as x,Wa as h,Xa as m,cb as I,db as l,fb as u,ka as b,lb as S,ra as w,ua as a,ya as g}from"./chunk-WW7CRUNY.js";import"./chunk-NKRFROHD.js";function A(t,n){t&1&&c(0,"i",28)}function H(t,n){t&1&&c(0,"i",29)}function $(t,n){t&1&&c(0,"i",30)}function D(t,n){if(t&1&&(v(0),p(1,A,1,0,"i",25)(2,H,1,0,"i",26)(3,$,1,0,"i",27),y()),t&2){let e=n.$implicit;a(),d("ngIf",e==="full"),a(),d("ngIf",e==="half"),a(),d("ngIf",e==="empty")}}function M(t,n){if(t&1&&(v(0),p(1,D,4,3,"ng-container",24),y()),t&2){let e=m().$implicit,o=m(2);a(),d("ngForOf",o.getStarTypes(e.valoracion_promedio))}}function z(t,n){t&1&&(i(0,"span",31),l(1,"Sin valorar"),r())}function L(t,n){if(t&1){let e=C();i(0,"div",12)(1,"div",13),h("click",function(){let s=_(e).$implicit,f=m(2);return x(f.selectClient(s))}),i(2,"span",14),l(3," Ver detalles "),r(),c(4,"div",15)(5,"div",16),i(6,"div",17)(7,"h5",18),l(8),r(),i(9,"div",19),p(10,M,2,1,"ng-container",20)(11,z,2,0,"ng-template",null,0,S),r(),i(13,"div")(14,"span",21),l(15),r(),i(16,"span",22),l(17," oportunidades ganadas "),r()(),i(18,"div")(19,"span",23),l(20),r(),i(21,"span",22),l(22," oportunidades perdidas "),r()()()()()}if(t&2){let e=n.$implicit,o=I(12);a(8),u(" ",e.nombre_cliente," "),a(2),d("ngIf",e.valoracion_promedio!=null)("ngIfElse",o),a(5),u(" ",e.oportunidades_ganadas," "),a(5),u(" ",e.oportunidades_perdidas," ")}}function P(t,n){if(t&1&&(i(0,"section",8)(1,"h2",9),l(2," Clientes Activos "),r(),i(3,"div",10),p(4,L,23,5,"div",11),r()()),t&2){let e=m();a(4),d("ngForOf",e.activeClients)}}function U(t,n){if(t&1){let e=C();i(0,"div",12)(1,"div",33),h("click",function(){let s=_(e).$implicit,f=m(2);return x(f.selectClient(s))}),i(2,"span",14),l(3," Ver detalles "),r(),c(4,"div",34),i(5,"div",35)(6,"h5",36),l(7),r(),i(8,"span",37),l(9,"Sin actividad en el mes"),r()()()()}if(t&2){let e=n.$implicit;a(7),u(" ",e.nombre_cliente," ")}}function B(t,n){if(t&1&&(i(0,"section",32)(1,"h2",9),l(2," Clientes Inactivos "),r(),i(3,"div",10),p(4,U,10,1,"div",11),r()()),t&2){let e=m();a(4),d("ngForOf",e.inactiveClients)}}var j=class t{constructor(n,e,o){this.router=n;this.http=e;this.platformId=o}selectedClient=null;clientes=[];ngOnInit(){this.getClientesConResumen()}getClientesConResumen(){if(!G(this.platformId))return;let n="https://dashboard3-api-production.up.railway.app/api/dashboard/oportunidad-cliente",e=localStorage.getItem("token");if(!e){console.warn("No se encontr\xF3 token en localStorage");return}let o=new V({"Access-Token":e});this.http.get(n,{headers:o}).subscribe({next:s=>{this.clientes=s},error:s=>{console.error("No pude cargar resumen:",s)}})}selectClient(n){this.router.navigate(["/dashboard3","general-cliente",n.nombre_cliente])}getStarTypes(n){if(n==null)return[];let e=Math.round(n*2)/2,o=[];for(let s=1;s<=5;s++)e>=s?o.push("full"):e+.5===s?o.push("half"):o.push("empty");return o}get activeClients(){return this.clientes.filter(n=>n.oportunidades_ganadas>0||n.oportunidades_perdidas>0)}get inactiveClients(){return this.clientes.filter(n=>n.oportunidades_ganadas===0&&n.oportunidades_perdidas===0)}static \u0275fac=function(e){return new(e||t)(g(F),g(O),g(b))};static \u0275cmp=k({type:t,selectors:[["app-general-cliente"]],decls:9,vars:2,consts:[["noValorar",""],["href",w`https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css`,"rel","stylesheet"],[1,"px-6","pb-10","font-sans","bg-white","dark:bg-slate-900","transition-colors","duration-300"],[1,"mt-4","mb-6","flex","justify-start"],["type","button","routerLink","/dashboard3",1,"inline-flex","items-center","space-x-2","text-[#800000]","dark:text-cyan-400","border-2","border-[#800000]","dark:border-cyan-400","bg-white/80","dark:bg-gray-800/80","backdrop-blur","font-semibold","uppercase","tracking-wide","px-6","py-2","rounded-full","shadow-md","hover:bg-[#800000]","hover:text-white","dark:hover:bg-cyan-400","dark:hover:text-gray-900","transition-all","duration-300"],[1,"ri-arrow-left-line","text-xl"],["class","space-y-6",4,"ngIf"],["class","mt-12 space-y-6",4,"ngIf"],[1,"space-y-6"],[1,"text-2xl","font-semibold","text-indigo-700","dark:text-indigo-300"],[1,"flex","flex-wrap","-mx-4"],["class","px-4 mb-6 w-full sm:w-6/12 md:w-4/12 lg:w-3/12",4,"ngFor","ngForOf"],[1,"px-4","mb-6","w-full","sm:w-6/12","md:w-4/12","lg:w-3/12"],["tabindex","0",1,"group","relative","flex","flex-col","min-w-0","break-words","bg-white","dark:bg-slate-800","rounded-2xl","overflow-hidden","shadow-lg","transform","hover:-translate-y-1","hover:shadow-2xl","transition-all","duration-300","ease-in-out","cursor-pointer","focus:outline-none","focus:ring-4","focus:ring-indigo-300",3,"click"],[1,"absolute","top-3","right-3","z-20","bg-indigo-600","text-white","text-xs","font-semibold","uppercase","px-2","py-1","rounded-full","dark:bg-cyan-400","dark:text-gray-900"],[1,"absolute","inset-0","pointer-events-none","bg-gradient-to-br","from-transparent","to-indigo-50","dark:from-transparent","dark:to-slate-700","opacity-0","group-hover:opacity-40","transition-opacity","duration-500"],[1,"absolute","top-0","left-0","h-full","w-1","bg-gradient-to-b","from-[#800000]","to-transparent","group-hover:from-teal-400","group-hover:to-indigo-600","transition-colors","duration-500"],[1,"flex-auto","p-6","space-y-4","relative","z-10"],[1,"uppercase","text-xs","font-bold","tracking-wide","text-gray-600","dark:text-gray-400","group-hover:text-indigo-700","dark:group-hover:text-cyan-300","transition-colors","duration-300"],[1,"flex","items-center","space-x-1"],[4,"ngIf","ngIfElse"],[1,"block","text-2xl","font-bold","text-indigo-600","dark:text-indigo-300","group-hover:text-indigo-800","dark:group-hover:text-indigo-100","transition-colors","duration-300"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"block","text-2xl","font-bold","text-red-600","dark:text-red-400","group-hover:text-red-800","dark:group-hover:text-red-200","transition-colors","duration-300"],[4,"ngFor","ngForOf"],["class","ri-star-fill text-yellow-400",4,"ngIf"],["class","ri-star-half-line text-yellow-400",4,"ngIf"],["class","ri-star-line text-gray-300 dark:text-gray-600",4,"ngIf"],[1,"ri-star-fill","text-yellow-400"],[1,"ri-star-half-line","text-yellow-400"],[1,"ri-star-line","text-gray-300","dark:text-gray-600"],[1,"text-sm","italic","text-gray-400","dark:text-gray-500"],[1,"mt-12","space-y-6"],["tabindex","0",1,"group","relative","flex","flex-col","min-w-0","break-words","bg-gray-100","dark:bg-slate-700","rounded-2xl","overflow-hidden","shadow-md","transform","hover:-translate-y-0.5","hover:shadow-lg","transition-all","duration-300","ease-in-out","opacity-80","hover:opacity-100","cursor-pointer","focus:outline-none","focus:ring-4","focus:ring-indigo-300",3,"click"],[1,"absolute","inset-y-0","left-0","w-1","bg-gray-300","dark:bg-gray-500"],[1,"flex-auto","p-6","space-y-3","relative","z-10"],[1,"uppercase","text-xs","font-bold","tracking-wide","text-gray-500"],[1,"text-sm","text-gray-500"]],template:function(e,o){e&1&&(c(0,"link",1),i(1,"main",2)(2,"div",3)(3,"button",4),c(4,"i",5),i(5,"span"),l(6,"Atr\xE1s"),r()()(),p(7,P,5,1,"section",6)(8,B,5,1,"section",7),r()),e&2&&(a(7),d("ngIf",o.activeClients.length),a(),d("ngIf",o.inactiveClients.length))},dependencies:[E,T,N,R],encapsulation:2})};export{j as GeneralClienteComponent};
